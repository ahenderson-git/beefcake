# Test Data Fixtures

This directory contains test data files used for automated testing.

## Files

### Input Data

- **clean.csv** - Perfect dataset with 10 rows, 6 columns, no nulls, clean headers
- **missing_values.csv** - Same structure as clean.csv but with ~20% missing values
- **mixed_types.csv** - Columns with ambiguous/inconsistent types (useful for type detection tests)
- **special_chars.csv** - Unicode, emojis, whitespace, special characters, edge cases
- **wide.csv** - 20+ columns (tests performance and UI with many columns)
- **large.csv** - 50,000+ rows (not committed, generate locally with `scripts/generate_test_data.py`)
- **invalid_format.txt** - Not a valid data file (tests error handling)

### Golden Outputs (in `/golden` subdirectory)

Reference outputs for comparison in tests. Generated by running transforms manually and verifying correctness.

- **clean_analysis.json** - Expected analysis output for clean.csv
- **clean_with_transforms.parquet** - Output after applying standard cleaning pipeline
- (Add more as needed)

### Pipelines (in `/pipelines` subdirectory)

Pre-configured pipeline specifications for testing pipeline execution.

- **basic_cleaning.json** - Standard cleaning operations

## Usage in Tests

### TypeScript/Vitest

```typescript
import { test, expect } from 'vitest';
import * as api from '../src-frontend/api';

test('should analyze clean CSV file', async () => {
  const response = await api.analyseFile('./testdata/clean.csv');
  expect(response.row_count).toBe(10);
  expect(response.column_count).toBe(6);
});
```

### Rust

```rust
#[test]
fn test_analyze_clean_file() {
    let response = analyze_file("testdata/clean.csv").unwrap();
    assert_eq!(response.row_count, 10);
    assert_eq!(response.summary.len(), 6);
}
```

### E2E/Playwright

```typescript
import { test, expect } from '@playwright/test';

test('load and analyze file', async ({ page }) => {
  // Assuming app is launched and testdata is accessible
  await page.getByTestId('btn-open-file').click();
  // Select testdata/clean.csv via dialog
  await expect(page.getByTestId('analysis-summary-panel')).toBeVisible();
});
```

## Maintenance

- Keep fixtures small (<1MB each except large.csv)
- Document any changes to fixture data
- Update golden outputs when analysis logic changes intentionally
- Fixtures are committed to Git for reproducibility

## Generating Large Datasets

For performance testing, generate large.csv locally:

```bash
cd scripts
python generate_test_data.py --rows 50000 --output ../testdata/large.csv
```

(This file is in .gitignore to avoid bloating the repository)
